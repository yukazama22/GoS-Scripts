-- Requirements
require('twgank')
-- Keys
Config = scriptConfig("ITristana", "Tristana.lua")
Config.addParam("Q", "Use Q", SCRIPT_PARAM_ONOFF, true)
Config.addParam("E", "Use E", SCRIPT_PARAM_ONOFF, true)
Config.addParam("R", "Use R", SCRIPT_PARAM_ONOFF, true)
-- PrintChat
PrintChat("Evolved Tristana is loaded")
PrintChat("Leave a upvote if you like it")

-- This is done every mil second
OnLoop(function(myHero)
AutoIgnite()
if IWalkConfig.Combo then
local unit = GetCurrentTarget()
if ValidTarget(unit, 1000) then
-- Use Tristana E
	if Config.E then
		if CanUseSpell(myHero, _E) == READY and IsInDistance(unit, GetCastRange(myHero, _E)) then
		CastTargetSpell(unit, _E)
		end
	end
-- Use Tristana Q
	if Config.Q then
		if CanUseSpell(myHero, _Q) == READY and CanUseSpell(myHero, _W) ~= READY and IsInDistance(unit, 543) then
		CastTargetSpell(myHero, _Q)
		end
	end
-- Use Tristana R if Target is Kileable
	if Config.R then
		if CanUseSpell(myHero, _R) == READY and rdmg() > GetCurrentHP(unit) + GetHPRegen(unit) and IsInDistance(unit, GetCastRange(myHero, _R)) then
		CastTargetSpell(unit, _R)
		end
	end

end
-- LanceClear Not Working ATM
if IWalkConfig.Laneclear then
	if Config.Q then
		if CanUseSpell(myHero, _Q) == READY then
		CastSpell(myHero, _Q)
end
		end
	end

end
end)

-- Rdmg function
function rdmg()
	if GetCastLevel(myHero, _R) == 0 then
		return 0
	end

	if GetCastLevel(myHero, _R) == 1 then
		return 300 + (GetBonusAP(myHero)/100*100)
	end

	if GetCastLevel(myHero, _R) == 2 then
		return 400 + (GetBonusAP(myHero)/100*100)
	end

	if GetCastLevel(myHero, _R) == 3 then
		return 500 + (GetBonusAP(myHero)/100*100)
	end

end
